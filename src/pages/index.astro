---
import BaseLayout from '@components/layouts/BaseLayout.astro';
import JobSearch from '@components/features/JobSearch';
import { getRandomQuip } from '@lib/data';
import { getLocationFromRequest } from '@lib/geo';

// Get detected country from Cloudflare
const detectedLocation = getLocationFromRequest(Astro.request);
const randomQuip = getRandomQuip();
---

<BaseLayout title="Will AI Replace Me? | AI Job Displacement Predictor">
  <main class="relative min-h-screen overflow-hidden">
    <!-- Gradient background -->
    <div class="absolute inset-0 bg-gradient-to-br from-surface-950 via-surface-900 to-surface-950" />
    <div class="absolute inset-0 bg-[radial-gradient(ellipse_at_top,_var(--color-danger-950)_0%,_transparent_50%)]" />
    
    <!-- Content -->
    <div class="relative z-10 mx-auto max-w-4xl px-6 py-20 lg:py-32">
      <!-- Hero Section -->
      <header class="text-center">
        <!-- The YES -->
        <h1 class="animate-fade-in-up text-[7rem] font-black tracking-[-0.02em] text-danger-500 sm:text-[8rem] lg:text-[10rem] leading-none">
          YES
        </h1>
        
        <!-- Subhead -->
        <p class="animate-fade-in-up mt-8 text-[1.375rem] font-medium text-surface-100 sm:text-[1.75rem] lg:text-[2rem] leading-tight tracking-[-0.01em]" style="animation-delay: 0.1s;">
          AI is coming for your job.
        </p>
        
        <p class="animate-fade-in-up mt-6 text-[1.5rem] text-surface-300 font-normal italic sm:text-[1.875rem] lg:text-[2.25rem] px-4 leading-relaxed tracking-normal max-w-4xl mx-auto" style="animation-delay: 0.2s;">
          "{randomQuip}"
        </p>
        
        <!-- Tagline -->
        <p class="animate-fade-in-up mt-12 text-[1.625rem] font-bold text-warning-400 sm:text-[2rem] lg:text-[2.5rem] tracking-tight" style="animation-delay: 0.3s;">
          But when?
        </p>
      </header>
      
      <!-- Search Section -->
      <section class="animate-fade-in-up mt-16 lg:mt-24" style="animation-delay: 0.4s;">
        <div class="glass-card p-8 lg:p-12">
          <h2 class="text-center text-[1.125rem] font-semibold text-surface-200 mb-10 tracking-tight">
            Enter your job title to find out
          </h2>
          
          <JobSearch 
            client:load 
            detectedCountry={detectedLocation.code}
            detectedCountryName={detectedLocation.name}
          />
        </div>
      </section>
      
      <!-- Random dark quip -->
    </div>
  </main>
</BaseLayout>
